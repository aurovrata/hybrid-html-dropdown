<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Hybrid Select</title>
    <link rel="stylesheet" href="./css/page.css" media="all">
    <link rel="stylesheet" href="./hybrid-select.css" media="all">
    <script src="./hybrid-select.js" type="text/javascript" defer=""></script>
  </head>
  <body>

<!-- Article: https://css-tricks.com/striking-a-balance-between-native-and-custom-select-elements/ -->
<h1 class="title">Custom Select: "Hybrid Select"</h1>
<div class="card">
  <p class="inst">Try to select an option with whatever tool you are using (e.g. mouse, touch, keyboard, etc...)<p>
      <div class="test-form">
        <form>
          <label for="name-field">Filter</label>
          <input type="text" id="filter-field" name="filter_field" />
          <label class="select-label" for="single"> Grocery selection</label>
          <select id="single" class="select-native js-select-native" name="select_field" aria-labelledby="jobLabel">
            <option value="" disabled="" selected=""> Select single</span>
            <optgroup label="Vegetables">
              <option value="fbn">French beans</option>
              <option value="pot">Potatoes</option>
              <option value="chl">Red chillis</option>
              <option value="bgr">Bitter gourd</option>
              <option value="oni">Onions</option>
            </optgroup>
            <optgroup label="Fruits">
              <option value="org">Oranges</option>
              <option value="app">Apples</option>
              <option value="bnn">Bananas</option>
              <option value="sfr">Star fruit</option>
              <option value="csp">Custard apple</option>
            </optgroup>
          </select>
          <select class="select-native" name="select_multiple" multiple aria-labelledby="jobLabel">
            <option value="" disabled="" selected=""> Select multiple</span>
            <optgroup label="Vegetables">
              <option value="fbn">French beans</option>
              <option value="pot">Potatoes</option>
              <option value="chl">Red chillis</option>
              <option value="bgr">Bitter gourd</option>
              <option value="oni">Onions</option>
            </optgroup>
            <optgroup label="Fruits">
              <option value="org">Oranges</option>
              <option value="app">Apples</option>
              <option value="bnn">Bananas</option>
              <option value="sfr">Star fruit</option>
              <option value="csp">Custard apple</option>
            </optgroup>
          </select>
          <label for="phone-field">Contact number</label>
          <input type="phone" id="phone-field" name="phone_field" />
          <div style="height:36px"><a href="JavaScript:void(0);" class="button">submit</a></div>
        </form>
      </div>

</div>

  <footer>
     <script type="text/javascript">
     (function(){
       let sel;
       document.addEventListener('DOMContentLoaded', (e) => {
         sel= document.querySelectorAll('.select-native');
         sel.forEach((s)=>{
           new HybridSelect(s,{
             // dropdown: 'landscape'
           });
         })
       });
       document.querySelector('.button').addEventListener('click', (e)=>{
         let fd = new FormData( e.target.closest('form') );
         for(let f of fd.keys()) console.log(f+'='+fd.get(f));
       })
       document.querySelector('#filter-field').addEventListener('change', (e)=>{
         let filterField = e.target, show=false;
         sel._hselect.refresh({
           listOption: function(o,i){
             if(filterField.value.trim()=='') return true;
             if(i==0) return true;
             if(o.nodeName == 'OPTGROUP'){
               if(o.label == filterField.value) show = true;
               else show = false;
             }
             return show;
           }
         });
       })
     })()
     </script>
  </footer>
  </body>
</html>
